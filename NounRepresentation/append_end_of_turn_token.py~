import os
import argparse

def parse_args():
    parser = argparse.ArgumentParser()
    parser.add_argument("input_dialogues", type=str, default="", help="Input dialogues")
    parser.add_argument("output_dialogues", type=str, default="", help="Output dialogues with end-of-utterance token appended")

    args = parser.parse_args()
    return args

if __name__ == "__main__":
    args = parse_args()
    eot_token = '__eot__'

    lines = open(args.input_dialogues, 'r').readlines()
    for lineidx, line in enumerate(lines):
        if line.strip().split()[-1] != eot_token:
            line = line.strip() + ' ' + eot_token + '\n'
            lines[lineidx] = line.replace('  ', ' ')


    

    out = open(args.output_dialogues, 'w')
    for line in lines:
        out.write(line)
    out.close()
